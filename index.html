<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Area Selector</title>
    <style>
        #imageContainer {
            position: relative;
            margin-top: 20px;
        }

        #selectedArea {
            position: absolute;
            border: 2px dashed red;
            pointer-events: none;
        }

        #dimensionsTable {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Image Area Selector</h1>

    <input type="file" id="imageInput" accept="image/*">
    
    <div id="imageContainer">
        <img id="selectedImage" alt="Selected Image">
        <div id="selectedArea"></div>
    </div>

    <table id="dimensionsTable">
        <thead>
            <tr>
                <th>X-axis</th>
                <th>Y-axis</th>
                <th>Width</th>
                <th>Height</th>
            </tr>
        </thead>
        <tbody id="dimensionsBody"></tbody>
    </table>

    <script>
        document.getElementById('imageInput').addEventListener('change', handleImageUpload);

        function handleImageUpload(event) {
            const input = event.target;
            if (input.files && input.files[0]) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    const img = document.getElementById('selectedImage');
                    img.src = e.target.result;

                    img.onload = function () {
                        initializeImageDimensions(img);
                        img.onclick = function (e) {
                            selectImageArea(e, img);
                        };
                    };
                };

                reader.readAsDataURL(input.files[0]);
            }
        }

        function initializeImageDimensions(img) {
            const imageContainer = document.getElementById('imageContainer');
            imageContainer.style.width = img.width + 'px';
            imageContainer.style.height = img.height + 'px';

            const selectedArea = document.getElementById('selectedArea');
            selectedArea.style.width = img.width + 'px';
            selectedArea.style.height = img.height + 'px';
        }

        function selectImageArea(e, img) {
            const selectedArea = document.getElementById('selectedArea');

            const rect = img.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            selectedArea.style.left = x + 'px';
            selectedArea.style.top = y + 'px';

            const dimensions = {
                x: x,
                y: y,
                width: selectedArea.offsetWidth,
                height: selectedArea.offsetHeight
            };

            updateDimensionsTable(dimensions);
        }

        function updateDimensionsTable(dimensions) {
            const tableBody = document.getElementById('dimensionsBody');
            const newRow = tableBody.insertRow();

            newRow.insertCell().textContent = dimensions.x.toFixed(2);
            newRow.insertCell().textContent = dimensions.y.toFixed(2);
            newRow.insertCell().textContent = dimensions.width.toFixed(2);
            newRow.insertCell().textContent = dimensions.height.toFixed(2);
        }
    </script>
</body>
</html>
