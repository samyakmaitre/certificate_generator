<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Area Selector</title>
    <style>
        #image-container {
            position: relative;
        }

        #selection-box {
            border: 2px dashed red;
            position: absolute;
            display: none;
        }

        table {
            margin-top: 20px;
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
    </style>
</head>
<body>
    <h1>Image Area Selector</h1>

    <input type="file" id="imageInput" accept="image/*">
    
    <div id="image-container">
        <img id="selectedImage" alt="Selected Image">
        <div id="selection-box"></div>
    </div>

    <table id="dimensionsTable">
        <thead>
            <tr>
                <th>X-axis</th>
                <th>Y-axis</th>
                <th>Width</th>
                <th>Height</th>
            </tr>
        </thead>
        <tbody>
            <!-- The selected dimensions will be added here dynamically -->
        </tbody>
    </table>

    <script>
        const imageInput = document.getElementById('imageInput');
        const selectedImage = document.getElementById('selectedImage');
        const selectionBox = document.getElementById('selection-box');
        const dimensionsTable = document.getElementById('dimensionsTable').getElementsByTagName('tbody')[0];

        imageInput.addEventListener('change', handleImageUpload);

        function handleImageUpload(event) {
            const file = event.target.files[0];

            if (file) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    selectedImage.src = e.target.result;
                    selectedImage.onload = function () {
                        initializeImageSelection();
                    };
                };

                reader.readAsDataURL(file);
            }
        }

        function initializeImageSelection() {
            selectedImage.style.cursor = 'crosshair';

            selectedImage.addEventListener('mousedown', startSelection);
            selectedImage.addEventListener('mousemove', updateSelection);
            selectedImage.addEventListener('mouseup', endSelection);
        }

        let startX, startY;

        function startSelection(event) {
            startX = event.clientX - selectedImage.offsetLeft;
            startY = event.clientY - selectedImage.offsetTop;

            selectionBox.style.width = '0';
            selectionBox.style.height = '0';
            selectionBox.style.left = startX + 'px';
            selectionBox.style.top = startY + 'px';
            selectionBox.style.display = 'block';

            selectedImage.removeEventListener('mousemove', updateSelection);
            selectedImage.addEventListener('mousemove', updateSelection);
        }

        function updateSelection(event) {
            const currentX = event.clientX - selectedImage.offsetLeft;
            const currentY = event.clientY - selectedImage.offsetTop;

            const width = currentX - startX;
            const height = currentY - startY;

            selectionBox.style.width = width + 'px';
            selectionBox.style.height = height + 'px';
        }

        function endSelection() {
            const width = parseInt(selectionBox.style.width);
            const height = parseInt(selectionBox.style.height);

            const x = startX;
            const y = startY;

            // Add the selected dimensions to the table
            addDimensionsToTable(x, y, width, height);

            // Reset the selection box
            selectionBox.style.width = '0';
            selectionBox.style.height = '0';
            selectionBox.style.display = 'none';

            selectedImage.removeEventListener('mousemove', updateSelection);
        }

        function addDimensionsToTable(x, y, width, height) {
            const newRow = dimensionsTable.insertRow();

            const cellX = newRow.insertCell(0);
            const cellY = newRow.insertCell(1);
            const cellWidth = newRow.insertCell(2);
            const cellHeight = newRow.insertCell(3);

            cellX.innerHTML = x;
            cellY.innerHTML = y;
            cellWidth.innerHTML = width;
            cellHeight.innerHTML = height;
        }
    </script>
</body>
</html>
