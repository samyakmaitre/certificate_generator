<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Area Selection</title>
    <style>
        #image-container {
            position: relative;
            width: 500px;
            height: 500px;
        }

        #selected-area {
            position: absolute;
            border: 2px solid red;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <h1>Image Area Selection</h1>
    
    <input type="file" id="imageInput" accept="image/*" onchange="loadImage()">
    
    <div id="image-container">
        <img id="uploadedImage" alt="Uploaded Image">
        <div id="selected-area"></div>
    </div>

    <script>
        function loadImage() {
            var input = document.getElementById('imageInput');
            var imageContainer = document.getElementById('image-container');
            var selectedArea = document.getElementById('selected-area');
            
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    document.getElementById('uploadedImage').setAttribute('src', e.target.result);
                };

                reader.readAsDataURL(input.files[0]);

                imageContainer.addEventListener('mousemove', function (e) {
                    var rect = imageContainer.getBoundingClientRect();
                    var x = e.clientX - rect.left;
                    var y = e.clientY - rect.top;

                    selectedArea.style.left = x + 'px';
                    selectedArea.style.top = y + 'px';
                });

                imageContainer.addEventListener('mouseleave', function () {
                    selectedArea.style.width = '0';
                    selectedArea.style.height = '0';
                });

                imageContainer.addEventListener('mousedown', function (e) {
                    var rect = imageContainer.getBoundingClientRect();
                    var startX = e.clientX - rect.left;
                    var startY = e.clientY - rect.top;

                    imageContainer.addEventListener('mousemove', function (e) {
                        var currentX = e.clientX - rect.left;
                        var currentY = e.clientY - rect.top;

                        var width = currentX - startX;
                        var height = currentY - startY;

                        selectedArea.style.width = width + 'px';
                        selectedArea.style.height = height + 'px';
                    });

                    imageContainer.addEventListener('mouseup', function () {
                        imageContainer.removeEventListener('mousemove', function () {});
                    });
                });
            }
        }
    </script>
</body>
</html>
